# -*- coding: utf-8 -*-

from enum import Enum

import db
import product


def product_data(product):
    title = product['title']
    price = product['price']

    if not product['comp']:
        output = '<b>{}</b>\n\n' \
                 '<b>–¶–µ–Ω–∞: {} —Ä—É–±.</b>'.format(title, price)
    else:
        comp = product['comp']
        output = '<b>{}</b>\n\n' \
                 '{}\n\n' \
                 '<b>–¶–µ–Ω–∞: {} —Ä—É–±.</b>'.format(title, comp, price)
    return output


def pizza_data(info):
    title = info['title']
    price = info['price']
    gram = info['gram']

    weights = product.get_pizza_weight_by_title(title)
    prices = ''
    for w in weights:
        prices = prices + str(w['text'] + ' - ' + str(int(price) + int(w['price'])) + ' —Ä—É–±.\n')

    if not info['comp']:
        output = '<b>{}</b>\n\n' \
                 '<b>{}</b>'.format(title, prices.replace('–î–∏–∞–º–µ—Ç—Ä ', '√ò='))
    else:
        comp = info['comp']
        output = '<b>{}</b>\n\n' \
                 '{}\n\n' \
                 '<b>{}</b>'.format(title, comp, prices.replace('–î–∏–∞–º–µ—Ç—Ä ', '√ò='))
    return output


def basket(chat_id):
    db.delete_empty_orders(chat_id)
    orders = db.get_orders_by_chat_id(chat_id)
    sum = 0
    output = '<b>üì• –ö–æ—Ä–∑–∏–Ω–∞:</b>\n\n'

    for o in orders:
        try:
            output = output + o[3] + ' ‚Äî ' + str(o[2]) + ' —à—Ç. \n(' + o[7] + ') = ' + str(o[5] * o[2]) + ' —Ä—É–±.' + '\n\n'
        except:
            output = output + o[3] + ' ‚Äî ' + str(o[2]) + ' —à—Ç. = ' + str(o[5] * o[2]) + ' —Ä—É–±.' + '\n\n'

    for o in orders:
        sum = sum + o[5] * o[2]

    output = output + '<b>–û–±—â–∞—è —Å—É–º–º–∞: ' + str(sum) + ' —Ä—É–±.</b>'

    if sum == 0:
        output = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ —á–µ–º 0 —Ä—É–±.'

    return output


class Messages(Enum):
    WELCOME = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {}. \n' \
              '–ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã. \n–í —Å–ª—É—á–∞–µ ' \
              '–≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤, –∑–≤–æ–Ω–∏–∏—Ç–µ –ø–æ –Ω–æ–º–µ—Ä—É \n8 (3532) 579-779 '

    DELIVERY = '‚úÖ <b>–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ 30-60 –º–∏–Ω—É—Ç</b>\n' \
               '‚úÖ –ú—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞ —Å—á—ë—Ç –∑–∞–ø–∞—Å–Ω—ã—Ö –∫—É—Ä—å–µ—Ä–æ–≤\n' \
               '‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 500 —Ä—É–±–ª–µ–π'

    CONTACTS = 'üìå –ù–∞—à –∞–¥—Ä–µ—Å: –û—Ä–µ–Ω–±—É—Ä–≥ —É–ª. –°–∞–ª–º—ã—à—Å–∫–∞—è, 58\n' \
               'üì± –ù–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω: 8 (3532) 579-779'

    INFO = '–ü–∏—Ü—Ü–∞‚Ä¶ –°–∫–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º —Å–ª–æ–≤–µ –≤—Å–µ–≥–æ –≤–∫—É—Å–Ω–æ–≥–æ: —Å–≤–µ–∂–µ–µ –º—è—Å–æ, –∫—É—Ä–∏—Ü–∞, ' \
           '–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã, –∏–∑—É–º–∏—Ç–µ–ª—å–Ω—ã–π —Å–æ—É—Å, –≥—Ä–∏–±—ã, –∞–Ω–∞–Ω–∞—Å—ã, –¥–æ–º–∞—à–Ω–∏–µ –ø–æ–º–∏–¥–æ—Ä—á–∏–∫–∏ ' \
           '–∏ –µ—â–µ –º–Ω–æ–≥–æ –≤–∞—à–∏—Ö –ª—é–±–∏–º—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤!\n\n–ú—ã –¥–µ–ª–∞–µ–º —Å–≤–æ—é –ø–∏—Ü—Ü—É —Ç–æ–ª—å–∫–æ –∏–∑ ' \
           '–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä—è–º–æ –∏–∑ –ø–µ—á–∏ –ø–æ–ø–∞–¥–∞–µ—Ç –∫ –≤–∞–º –Ω–∞ —Å—Ç–æ–ª. ' \
           '–ò–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π —Å–µ–∫—Ä–µ—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –¥–µ–ª–∏–º—Å—è —Å –≤–∞–º–∏, –Ω–∞—à–∏–º–∏ –ª—é–±–∏–º—ã–º–∏ –≥–æ—Å—Ç—è–º–∏! \n\n' \
           '–ê –≤—ã —É–∂–µ —Ä–µ—à–∏–ª–∏, –∫–∞–∫—É—é –ø–∏—Ü—Ü—É –±—É–¥–µ—Ç–µ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è –≤ La Tua?'
